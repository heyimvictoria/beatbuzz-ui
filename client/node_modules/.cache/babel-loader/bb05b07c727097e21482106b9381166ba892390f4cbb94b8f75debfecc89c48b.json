{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kazak\\\\Desktop\\\\codingProjects\\\\java-projects\\\\beat-buzz\\\\beatbuzz-ui\\\\beatbuzz-ui\\\\client\\\\src\\\\Dashbord.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport useAuth from \"./useAuth\";\nimport TrackSearchResult from \"./TrackSearchResult\";\nimport Player from \"./Player\";\nimport { Container, Form } from \"react-bootstrap\";\nimport SpotifyWebApi from \"spotify-web-api-node\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst spotifyApi = new SpotifyWebApi({\n  clientId: \"a749ae54533d4373a5cd180d822cf1e6\"\n});\nexport default function Dashboard({\n  code\n}) {\n  _s();\n  const accessToken = useAuth(code);\n  const [search, setSearch] = useState(\"\");\n  const [searchResults, setSearchResults] = useState([]);\n  const [playingTrack, setPlayingTrack] = useState();\n  function chooseTrack(track) {\n    setPlayingTrack(track);\n    setSearch('');\n  }\n  useEffect(() => {\n    if (!accessToken) return;\n    spotifyApi.setAccessToken(accessToken);\n  }, [accessToken]);\n  useEffect(() => {\n    if (!search) return;\n    if (!accessToken) return;\n    let cancel = false;\n    spotifyApi.searchTracks(search).then(res => {\n      if (cancel) return;\n      console.log(\"Search results:\", res.body.tracks.items);\n      setSearchResults(res.body.tracks.items.map(track => {\n        // Check if album and images exist\n        if (!track.album || !track.album.images) {\n          return null; // Skip this track if album or images are missing\n        }\n        const smallestAlbumImage = track.album.images.reduce((smallest, image) => {\n          if (image.height < smallest.height) return image;\n          return smallest;\n        }, track.album.images[0]);\n        return {\n          artist: track.artists[0].name,\n          title: track.name,\n          uri: track.uri,\n          albumUrl: smallestAlbumImage.url\n        };\n      }).filter(track => track !== null)); // Filter out null values\n    }).catch(error => {\n      console.error(\"Error searching tracks:\", error);\n    });\n    return () => {\n      cancel = true;\n    };\n  }, [accessToken, search]);\n  return (\n    /*#__PURE__*/\n    //this container is the search bar\n    _jsxDEV(Container, {\n      className: \"d-flex flex-column py-2\",\n      style: {\n        height: \"100vh\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n        type: \"search\",\n        placeholder: \"Search Songs/Artists\",\n        onChange: e => setSearch(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-grow-1 my-2\",\n        style: {\n          overflowY: \"auto\"\n        },\n        children: searchResults.map(track => /*#__PURE__*/_jsxDEV(TrackSearchResult, {\n          track: track,\n          chooseTrack: chooseTrack\n        }, track.uri, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", /*#__PURE__*/_jsxDEV(Player, {\n          accessToken: accessToken,\n          trackUri: playingTrack === null || playingTrack === void 0 ? void 0 : playingTrack.uri\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }, this)\n  );\n}\n_s(Dashboard, \"iXdh45Kawy4N93zSRktyxCa9wI4=\", false, function () {\n  return [useAuth];\n});\n_c = Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["useState","useEffect","useAuth","TrackSearchResult","Player","Container","Form","SpotifyWebApi","jsxDEV","_jsxDEV","spotifyApi","clientId","Dashboard","code","_s","accessToken","search","setSearch","searchResults","setSearchResults","playingTrack","setPlayingTrack","chooseTrack","track","setAccessToken","cancel","searchTracks","then","res","console","log","body","tracks","items","map","album","images","smallestAlbumImage","reduce","smallest","image","height","artist","artists","name","title","uri","albumUrl","url","filter","catch","error","className","style","children","Control","type","placeholder","onChange","e","target","value","fileName","_jsxFileName","lineNumber","columnNumber","overflowY","trackUri","_c","$RefreshReg$"],"sources":["C:/Users/kazak/Desktop/codingProjects/java-projects/beat-buzz/beatbuzz-ui/beatbuzz-ui/client/src/Dashbord.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport useAuth from \"./useAuth\";\r\nimport TrackSearchResult from \"./TrackSearchResult\";\r\nimport Player from \"./Player\";\r\nimport { Container, Form } from \"react-bootstrap\";\r\nimport SpotifyWebApi from \"spotify-web-api-node\";\r\n\r\nconst spotifyApi = new SpotifyWebApi({\r\n  clientId: \"a749ae54533d4373a5cd180d822cf1e6\",\r\n});\r\n\r\nexport default function Dashboard({ code }) {\r\n  const accessToken = useAuth(code);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [playingTrack, setPlayingTrack] = useState()\r\n\r\n  function chooseTrack(track) {\r\n    setPlayingTrack(track)\r\n    setSearch('')\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!accessToken) return;\r\n    spotifyApi.setAccessToken(accessToken);\r\n  }, [accessToken]);\r\n\r\n  useEffect(() => {\r\n    if (!search) return;\r\n    if (!accessToken) return;\r\n\r\n    let cancel = false;\r\n    spotifyApi\r\n      .searchTracks(search)\r\n      .then((res) => {\r\n        if (cancel) return;\r\n        console.log(\"Search results:\", res.body.tracks.items);\r\n        setSearchResults(\r\n          res.body.tracks.items\r\n            .map((track) => {\r\n              // Check if album and images exist\r\n              if (!track.album || !track.album.images) {\r\n                return null; // Skip this track if album or images are missing\r\n              }\r\n\r\n              const smallestAlbumImage = track.album.images.reduce(\r\n                (smallest, image) => {\r\n                  if (image.height < smallest.height) return image;\r\n                  return smallest;\r\n                },\r\n                track.album.images[0]\r\n              );\r\n\r\n              return {\r\n                artist: track.artists[0].name,\r\n                title: track.name,\r\n                uri: track.uri,\r\n                albumUrl: smallestAlbumImage.url,\r\n              };\r\n            })\r\n            .filter((track) => track !== null)\r\n        ); // Filter out null values\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error searching tracks:\", error);\r\n      });\r\n\r\n    return () => {\r\n      cancel = true;\r\n    };\r\n  }, [accessToken, search]);\r\n\r\n  return (\r\n\r\n    //this container is the search bar\r\n    <Container className=\"d-flex flex-column py-2\" style={{ height: \"100vh\" }}> \r\n      <Form.Control\r\n        type=\"search\"\r\n        placeholder=\"Search Songs/Artists\"\r\n        onChange={(e) => setSearch(e.target.value)}\r\n      />\r\n      <div className=\"flex-grow-1 my-2\" style={{ overflowY: \"auto\" }}>\r\n        {searchResults.map((track) => (\r\n          <TrackSearchResult track={track} key={track.uri} chooseTrack={chooseTrack} />\r\n        ))}\r\n      </div>\r\n      <div> <Player accessToken={accessToken} trackUri={playingTrack?.uri}/></div>\r\n    </Container>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}